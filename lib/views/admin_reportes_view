import 'package:flutter/material.dart';

class AdminReportesView extends StatelessWidget {
  const AdminReportesView({super.key});

  @override
  Widget build(BuildContext context) {
    // Datos simulados de reportes en Cali
    final List<Map<String, dynamic>> reportes = [
      {
        "id": "REP-001",
        "usuario": "Juan Pérez",
        "empresa": "Cootransol",
        "motivo": "Exceso de velocidad",
        "fecha": "Hace 10 min",
        "gravedad": "Alta",
        "color": Colors.red
      },
      {
        "id": "REP-002",
        "usuario": "María López",
        "empresa": "La Ermita",
        "motivo": "Incumplimiento de ruta",
        "fecha": "Hace 1 hora",
        "gravedad": "Media",
        "color": Colors.orange
      },
      {
        "id": "REP-003",
        "usuario": "Andrés Campo",
        "empresa": "Alameda",
        "motivo": "Vehículo en mal estado",
        "fecha": "Ayer",
        "gravedad": "Baja",
        "color": Colors.blue
      },
    ];

    return Scaffold(
      appBar: AppBar(
        title: const Text("Gestión de Reportes"),
        backgroundColor: const Color(0xFF01579B),
        foregroundColor: Colors.white,
      ),
      body: Column(
        children: [
          // Resumen rápido de estadísticas
          _buildResumenCards(),
          
          const Padding(
            padding: EdgeInsets.symmetric(horizontal: 16, vertical: 8),
            child: Align(
              alignment: Alignment.centerLeft,
              child: Text("Reportes Recientes", 
                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 18)),
            ),
          ),

          Expanded(
            child: ListView.builder(
              itemCount: reportes.length,
              itemBuilder: (context, index) {
                final rep = reportes[index];
                return Card(
                  margin: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(15)),
                  child: ListTile(
                    leading: Container(
                      width: 5,
                      height: 40,
                      decoration: BoxDecoration(
                        color: rep['color'],
                        borderRadius: BorderRadius.circular(10)
                      ),
                    ),
                    title: Text("${rep['motivo']} - ${rep['id']}", 
                      style: const TextStyle(fontWeight: FontWeight.bold)),
                    subtitle: Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        Text("Empresa: ${rep['empresa']}"),
                        Text("Usuario: ${rep['usuario']} • ${rep['fecha']}"),
                      ],
                    ),
                    trailing: Chip(
                      label: Text(rep['gravedad'], 
                        style: const TextStyle(color: Colors.white, fontSize: 10)),
                      backgroundColor: rep['color'],
                    ),
                    onTap: () {
                      // Mostrar detalles del reporte
                    },
                  ),
                );
              },
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildResumenCards() {
    return Padding(
      padding: const EdgeInsets.all(16.0),
      child: Row(
        children: [
          _cardEstado("Pendientes", "12", Colors.orange),
          const SizedBox(width: 10),
          _cardEstado("Críticos", "3", Colors.red),
          const SizedBox(width: 10),
          _cardEstado("Resueltos", "45", Colors.green),
        ],
      ),
    );
  }

  Widget _cardEstado(String titulo, String cantidad, Color color) {
    return Expanded(
      child: Container(
        padding: const EdgeInsets.all(15),
        decoration: BoxDecoration(
          color: color.withOpacity(0.1),
          borderRadius: BorderRadius.circular(15),
          border: Border.all(color: color.withOpacity(0.5)),
        ),
        child: Column(
          children: [
            Text(cantidad, style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold, color: color)),
            Text(titulo, style: TextStyle(fontSize: 10, color: color.withOpacity(0.8))),
          ],
        ),
      ),
    );
  }
}